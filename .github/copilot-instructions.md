# Mario Climbing Game â€” AI é–‹ç™¼æŒ‡å¼•

é€™æ˜¯ä¸€å€‹åŸºæ–¼ pygame çš„å‚ç›´æ”€çˆ¬éŠæˆ²ï¼Œæ¡ç”¨æ¨¡çµ„åŒ–æ¶æ§‹ã€‚æœ¬æŒ‡å¼•æ—¨åœ¨è®“ AI é–‹ç™¼ä»£ç†èƒ½ç«‹å³ç†è§£å°ˆæ¡ˆçµæ§‹ä¸¦é«˜æ•ˆç”¢å‡ºã€‚

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ§‹

### ä¸»è¦çµ„ä»¶

- **MarioClimbingGame** (`main.py`): éŠæˆ²ä¸»æ§åˆ¶å™¨ï¼Œç®¡ç†éŠæˆ²å¾ªç’° (handle_events â†’ update â†’ render, 60 FPS)
- **Player** (`src/characters/player.py`): è§’è‰²ç³»çµ±ï¼ŒåŒ…å«ç‰©ç†é‹ç®—ã€è¼¸å…¥è™•ç†ã€å¥—è£æŠ€èƒ½
- **LevelManager** (`src/levels/level_manager.py`): é—œå¡ç®¡ç†ï¼Œå‹•æ…‹ç”Ÿæˆ 5 é—œæŒ‘æˆ°
- **EquipmentManager** (`src/equipment/equipment_manager.py`): 4 å¥—è£ç³»çµ±ï¼Œå¾ 1-4 ä»¶å¥—æ•ˆæœéå¢

### æ•¸æ“šæµå‘

```
Input â†’ Player.handle_input() â†’ Physics Update â†’ Collision Detection â†’
Equipment Effects â†’ Enemy AI â†’ Trap Updates â†’ Rendering â†’ UI Display
```

## ğŸ“‹ é–‹ç™¼è¦ç¯„

### ä»£ç¢¼é¢¨æ ¼

- **èªè¨€**: æ‰€æœ‰è¨»è§£ã€docstring ä½¿ç”¨ç¹é«”ä¸­æ–‡
- **å‘½å**: è®Šæ•¸/å‡½å¼ `snake_case`ï¼Œé¡åˆ¥ `PascalCase`ï¼Œå¸¸æ•¸ `UPPER_CASE`
- **Docstring**: å¿…é ˆåŒ…å«åŠŸèƒ½èªªæ˜ã€åƒæ•¸ã€å›å‚³å€¼ï¼ˆç”¨ `\n` åˆ†è¡Œï¼‰
- **æ™‚é–“å–®ä½**: æ‰€æœ‰è¨ˆæ™‚å™¨ä»¥å¹€æ•¸è¨ˆç®—ï¼ˆ60 å¹€ â‰ˆ 1 ç§’ï¼‰
- **ä¸»ç¨‹å¼**: æª”æ¡ˆçµå°¾ç›´æ¥å‘¼å« `main()`ï¼Œä¸ä½¿ç”¨ `if __name__ == "__main__":`

### æ ¸å¿ƒæ¥å£è¦ç¯„

```python
# æ‰€æœ‰éŠæˆ²ç‰©ä»¶å¿…é ˆå¯¦ä½œ
def get_collision_rect() -> pygame.Rect
def render(screen: pygame.Surface, camera_y: float)

# é™·é˜±å­é¡åˆ¥å¿…é ˆå‘¼å«åŸºé¡æ–¹æ³•
def update(self):
    # ... å­é¡é‚è¼¯ ...
    self._update_base_properties()  # å¿…é ˆå‘¼å«

# æ”å½±æ©Ÿç³»çµ±ä¸€è‡´æ€§
camera_y = player.y - SCREEN_HEIGHT // 2
screen_y = object.y - camera_y + SCREEN_HEIGHT // 2
```

## ğŸ¯ å¸¸è¦‹é–‹ç™¼æ¨¡å¼

### æ–°å¢é™·é˜±

1. ç¹¼æ‰¿ `BaseTrap`ï¼Œå¯¦ä½œ `update()`, `render()`, `_trigger_effect()`
2. åœ¨ `update()` ä¸­å‘¼å« `self._update_base_properties()`
3. åœ¨ `LevelManager._create_level_N()` ä¸­åŠ å…¥å¯¦ä¾‹

### æ–°å¢æ•µäºº

1. ç¹¼æ‰¿ `BaseEnemy`ï¼Œå¯¦ä½œ `update_ai()`, `render()`, `attack_player()`
2. åœ¨é—œå¡çš„ `enemies` æ¸…å–®ä¸­åŠ å…¥å¯¦ä¾‹
3. æ­»äº¡æ‰è½åœ¨ `main._handle_enemy_drops()` è‡ªå‹•è™•ç†

### è£å‚™æ‰è½æµç¨‹

```
Enemy Death â†’ EquipmentDropManager.try_drop_item() â†’ EquipmentItem
â†’ Player Pickup â†’ EquipmentManager.add_set_piece() â†’ Effect Updates
```

## ğŸ”§ é™¤éŒ¯èˆ‡æ¸¬è©¦

### å¿«é€Ÿå•Ÿå‹•

```powershell
pip install pygame==2.5.2
python main.py
```

### é™¤éŒ¯æŠ€å·§

- **è·³éé—œå¡**: ä¿®æ”¹ `LevelManager.current_level_number`
- **ç„¡æ•µæ¨¡å¼**: è¨­å®š `player.invulnerability_time = 999`
- **å¿«é€Ÿæ¸¬è©¦**: æš«æ™‚è¨»è§£ `clock.tick(FPS)` åŠ é€ŸåŸ·è¡Œ
- **ç¢°æ’å¯è¦–åŒ–**: åœ¨ render æ–¹æ³•ä¸­ç¹ªè£½ `get_collision_rect()`

### è§’è‰²èƒ½åŠ›é€ŸæŸ¥

- **è§’è‰² 0**: å¹³è¡¡å‹ (è¡€é‡ 100, é€Ÿåº¦ 5, è·³èº 15, æ”»æ“Š 20)
- **è§’è‰² 1**: é€Ÿåº¦å‹ (è¡€é‡ 80, é€Ÿåº¦ 8, è·³èº 12, æ”»æ“Š 15)
- **è§’è‰² 2**: è·³èºå‹ (è¡€é‡ 90, é€Ÿåº¦ 4, è·³èº 18, æ”»æ“Š 18, äºŒæ®µè·³)
- **è§’è‰² 3**: å¦å…‹å‹ (è¡€é‡ 150, é€Ÿåº¦ 3, è·³èº 10, æ”»æ“Š 25)

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### ç¢°æ’ç³»çµ±

- æ‰€æœ‰éŠæˆ²ç‰©ä»¶çš„ç¢°æ’æª¢æ¸¬åŸºæ–¼ `get_collision_rect()`
- ç©å®¶è¹²ä¸‹æ™‚ç¢°æ’çŸ©å½¢é«˜åº¦ç¸®å°ç‚ºä¸€åŠ
- å¹³å°ç¢°æ’å„ªå…ˆè™•ç†å‚ç›´æ–¹å‘ï¼Œå†è™•ç†æ°´å¹³æ–¹å‘

### å¥—è£ç³»çµ±æ•´åˆ

- å¥—è£æ•ˆæœåœ¨ `EquipmentManager.update()` ä¸­æŒçºŒä½œç”¨
- æŠ€èƒ½å¿«æ·éµï¼šæ•¸å­—éµ 1-4 å°æ‡‰ç«ç„°ã€å†°éœœã€å½±å­ã€å¦å…‹å¥—è£
- å¥—è£é¡è‰²æœƒå½±éŸ¿è§’è‰²æ¸²æŸ“å¤–è§€

### æ€§èƒ½è€ƒé‡

- æ¸²æŸ“å‰æª¢æŸ¥ `is_in_screen_bounds()` é¿å…ç•«é¢å¤–ç‰©ä»¶æµªè²»æ•ˆèƒ½
- æ•µäºº AI è·é›¢æª¢æ¸¬ä½¿ç”¨å¹³æ–¹è·é›¢é¿å…é–‹æ–¹é‹ç®—
- å‹•ç•«å¹€æ•¸å®šæœŸé‡ç½®é˜²æ­¢æ•¸å€¼æº¢å‡º

## ğŸ® éŠæˆ²ç‰¹è‰²å¯¦ä½œ

### çµ„åˆæŠ€èƒ½ç³»çµ±

- åŠ é€Ÿ + è·³èº = è·³èºé«˜åº¦æå‡ 30% (`jump_boost_multiplier = 1.3`)
- è·³èºç·©è¡æ©Ÿåˆ¶ï¼š8 å¹€å®¹éŒ¯æ™‚é–“æé«˜æ“ä½œæ‰‹æ„Ÿ

### Boss æˆ°æ©Ÿåˆ¶

- Boss ä½æ–¼ç¬¬ 5 é—œï¼Œå…·å‚™å¤šéšæ®µæ”»æ“Šæ¨¡å¼
- ç¯„åœæ”»æ“Šã€å¬å–šå°å…µã€éœ‡æ³¢æ”»æ“Šç­‰ç‰¹æ®ŠæŠ€èƒ½
- è¡€é‡è®ŠåŒ–è§¸ç™¼ä¸åŒ AI è¡Œç‚ºæ¨¡å¼

ç•¶éœ€è¦æ“´å±•åŠŸèƒ½æ™‚ï¼Œå„ªå…ˆæŸ¥é–±å°æ‡‰çš„åŸºé¡å’Œç®¡ç†å™¨ï¼Œéµå¾ªæ—¢æœ‰æ¨¡å¼å¯ç¢ºä¿ç³»çµ±æ•´åˆæ€§ã€‚
